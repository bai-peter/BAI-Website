
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <!-- Cache busting timestamp: 2025-01-07T15:35:00Z -->
    <title>BAI - Behavioral Alpha Investments</title>
    <meta name="description" content="BAI uses artificial intelligence to systematically detect and trade against human behavioral errors in the market." />
    <meta name="author" content="BAI LLC" />
    <meta property="og:image" content="/og-image.png" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    
    <script>
      // Embedded redirect script to handle old asset paths
      function runRedirectScript() {
        console.log('Redirect script running...');
        
        // Update debug indicator
        var scriptStatus = document.getElementById('script-status');
        var currentPath = document.getElementById('current-path');
        var assetsFixed = document.getElementById('assets-fixed');
        
        if (scriptStatus) scriptStatus.textContent = 'Running';
        if (currentPath) currentPath.textContent = window.location.pathname;
        
        console.log('Current pathname:', window.location.pathname);
        console.log('Current URL:', window.location.href);
        console.log('User Agent:', navigator.userAgent);
        
        var fixedCount = 0;
        
        // Check if we're on the old path and redirect
        if (window.location.pathname.includes('/BAI-Website/')) {
          var newPath = window.location.pathname.replace('/BAI-Website/', '/');
          console.log('Redirecting from', window.location.pathname, 'to', newPath);
          if (scriptStatus) scriptStatus.textContent = 'Redirecting...';
          window.location.replace(newPath);
        }
        
        // Test if assets are accessible
        fetch('/assets/test-asset-access')
          .then(response => {
            console.log('Asset access test response:', response.status);
          })
          .catch(error => {
            console.log('Asset access test error:', error);
          });
        
        // Force reload of assets if they're cached
        var links = document.querySelectorAll('link[rel="stylesheet"]');
        links.forEach(function(link) {
          if (link.href.includes('/BAI-Website/')) {
            console.log('Updating CSS link from', link.href, 'to', link.href.replace('/BAI-Website/', '/'));
            link.href = link.href.replace('/BAI-Website/', '/');
            fixedCount++;
          }
        });
        
        var scripts = document.querySelectorAll('script[src]');
        scripts.forEach(function(script) {
          if (script.src.includes('/BAI-Website/')) {
            console.log('Updating script src from', script.src, 'to', script.src.replace('/BAI-Website/', '/'));
            script.src = script.src.replace('/BAI-Website/', '/');
            fixedCount++;
          }
        });
        
        // Log all current asset references
        console.log('All CSS links:', Array.from(links).map(l => l.href));
        console.log('All script sources:', Array.from(scripts).map(s => s.src));
        
        // Add error handlers for asset loading failures
        window.addEventListener('error', function(e) {
          if (e.target.tagName === 'SCRIPT' || e.target.tagName === 'LINK') {
            console.log('Asset loading error:', e.target.src || e.target.href);
            if (e.target.src && e.target.src.includes('/BAI-Website/')) {
              console.log('Attempting to fix old asset path...');
              e.target.src = e.target.src.replace('/BAI-Website/', '/');
              fixedCount++;
            }
            if (e.target.href && e.target.href.includes('/BAI-Website/')) {
              console.log('Attempting to fix old asset path...');
              e.target.href = e.target.href.replace('/BAI-Website/', '/');
              fixedCount++;
            }
            if (assetsFixed) assetsFixed.textContent = fixedCount;
          }
        });
        
        // Monitor DOM changes for new elements with old paths
        var observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.type === 'childList') {
              mutation.addedNodes.forEach(function(node) {
                if (node.nodeType === 1) { // Element node
                  if (node.tagName === 'SCRIPT' && node.src && node.src.includes('/BAI-Website/')) {
                    console.log('New script with old path detected, fixing...');
                    node.src = node.src.replace('/BAI-Website/', '/');
                    fixedCount++;
                  }
                  if (node.tagName === 'LINK' && node.href && node.href.includes('/BAI-Website/')) {
                    console.log('New link with old path detected, fixing...');
                    node.href = node.href.replace('/BAI-Website/', '/');
                    fixedCount++;
                  }
                  if (assetsFixed) assetsFixed.textContent = fixedCount;
                }
              });
            }
          });
        });
        
        observer.observe(document.documentElement, {
          childList: true,
          subtree: true
        });
        
        if (assetsFixed) assetsFixed.textContent = fixedCount;
        if (scriptStatus) scriptStatus.textContent = 'Complete';
        
        console.log('Redirect script completed');
      }
      
      // Run immediately and also after DOM is loaded
      runRedirectScript();
      document.addEventListener('DOMContentLoaded', runRedirectScript);
      window.addEventListener('load', runRedirectScript);
    </script>
  </head>

  <body>
    <div id="root"></div>
    
    <!-- Debug indicator -->
    <div id="debug-info" style="position: fixed; top: 10px; right: 10px; background: #333; color: #fff; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; z-index: 9999;">
      <div>Redirect Script: <span id="script-status">Loading...</span></div>
      <div>Current Path: <span id="current-path"></span></div>
      <div>Assets Fixed: <span id="assets-fixed">0</span></div>
    </div>
    
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx?v=20250107"></script>
    
    <script>
      // Single Page Apps for GitHub Pages
      // MIT License
      // https://github.com/rafgraph/spa-github-pages
      // This script checks to see if a redirect is present in the query string,
      // converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      // When the single page app is loaded further down in this file,
      // the correct url will be waiting in the browser's history for
      // the single page app to route accordingly.
      (function(l) {
        if (l.search[1] === '/' ) {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location))
    </script>
  </body>
</html>
